routes:
  - id: service-a-route
    uri: /service-a/*
    name: service-a
    plugins:
      proxy-rewrite:
        regex_uri:
          - ^/service-a/(.*)
          - /$1
      openid-connect:
        client_id: apisix
        client_secret: 2f3d0365-9c7a-4a2f-8c4d-apisix-demo
        discovery: http://keycloak:8080/realms/demo/.well-known/openid-configuration
        scope: "openid profile email"
        bearer_only: false
        logout_path: /service-a/logout
        post_logout_redirect_uri: http://localhost:9080/
        redirect_uri: http://localhost:9080/service-a/callback
        token_endpoint_auth_method: client_secret_post
        set_access_token_header: true
        set_id_token_header: true
        set_userinfo_header: true
        session:
          secret: ed0e7c5dcb0045d09f1b4c653790a45a
    upstream:
      type: roundrobin
      nodes:
        "service-a:8000": 1
